{"version":3,"file":"build.js","sources":["../src/client/client.js"],"sourcesContent":["function getNewRound(players, currentRoundNumber) {\n\tconst newRoundPlayerScores = players.reduce((acc, player) => {\n\t\treturn { ...acc, [player]: 0 }\n\t}, {})\n\n\treturn {\n\t\tnumber: currentRoundNumber + 1,\n\t\tscores: newRoundPlayerScores,\n\t}\n}\n\nfunction swapPosition(array, indexA, indexB) {\n\tconst tmp = array[indexA]\n\tarray[indexA] = array[indexB]\n\tarray[indexB] = tmp\n\n\treturn array\n}\n\n// eslint-disable-next-line no-undef\nnew Ractive({\n\tel: 'body',\n\ttemplate: require('./client.html'),\n\tdata: {\n\t\tpreGame: true,\n\t\tplayers: JSON.parse(localStorage.getItem('players')) || [],\n\t\troundsToPlay: JSON.parse(localStorage.getItem('rounds')) || null,\n\t\tcurrentScoringPlayer: undefined,\n\t\taddPlayerName: '',\n\t\tcurrentRound: {},\n\t\tcurrentGame: {\n\t\t\trounds: [],\n\t\t},\n\t\twinningScoreType: 'HIGH',\n\t},\n\tcomputed: {\n\t\ttotals() {\n\t\t\tconst scores = this.get('currentGame.rounds').map(round => round.scores)\n\t\t\tconst start = this.get('players').reduce((acc, player) => {\n\t\t\t\treturn { ...acc, [player]: 0 }\n\t\t\t}, {})\n\n\t\t\treturn scores.reduce((acc, score) => {\n\t\t\t\tObject.keys(acc).forEach(key => {\n\t\t\t\t\tacc[key] += score[key]\n\t\t\t\t})\n\n\t\t\t\treturn acc\n\t\t\t}, start)\n\t\t},\n\t\tdisplayRounds() {\n\t\t\treturn this.get('currentGame.rounds').slice().sort((a, b) => b.number - a.number)\n\t\t},\n\t},\n\tgetRoundIndex(givenRoundNumber) {\n\t\treturn this.get('currentGame.rounds').findIndex(round => round.number === givenRoundNumber)\n\t},\n\tisWinningScore(score) {\n\t\tconst totals = this.get('totals')\n\t\tconst scores = Object.values(totals)\n\t\tconst winningScore = this.get('winningScoreType') === 'HIGH' ? Math.max(...scores) : Math.min(...scores)\n\n\t\tif (this.get('currentGame.rounds').length === 1) {\n\t\t\treturn false\n\t\t}\n\n\t\treturn score === winningScore\n\t},\n\tstartGame() {\n\t\tconst ractive = this\n\n\t\tractive.set({ preGame: false })\n\t\tractive.push('currentGame.rounds', getNewRound(ractive.get('players'), 0))\n\n\t\tractive.link('currentGame.rounds.0', 'currentRound')\n\t\tractive.link('players.0', 'currentScoringPlayer')\n\n\t\tconst roundsToPlay = ractive.get('roundsToPlay')\n\t\tconst players = ractive.get('players')\n\n\t\tplayers && players.length > 0 ? localStorage.setItem('players', JSON.stringify(ractive.get('players'))) : localStorage.removeItem('players')\n\t\troundsToPlay ? localStorage.setItem('rounds', JSON.stringify(roundsToPlay)) : localStorage.removeItem('rounds')\n\t},\n\taddPlayer(name, context, event) {\n\t\tevent.preventDefault()\n\n\t\tif (!name || this.get('players').find(player => player === name)) {\n\t\t\treturn alert('Player already exists!')\n\t\t}\n\n\t\tthis.push('players', name)\n\t\tthis.set({ addPlayerName: '' })\n\t},\n\teditPlayer(name) {\n\t\tthis.removePlayer(name)\n\t\tthis.set({ addPlayerName: name }).then(() => {\n\t\t\tthis.find('#player').select()\n\t\t})\n\t},\n\tremovePlayer(name) {\n\t\tconst playerIndex = this.get('players').indexOf(name)\n\t\tthis.splice('players', playerIndex, 1)\n\t},\n\treorderPlayer(playerIndex, moveUp) {\n\t\tif ((moveUp && playerIndex !== 0) || (!moveUp && playerIndex !== this.get('players').length - 1)) {\n\t\t\tthis.set({ players: swapPosition(this.get('players'), playerIndex, moveUp ? playerIndex - 1 : playerIndex + 1) })\n\t\t}\n\t},\n\tchangeCurrentScoringPlayer(playerIndex) {\n\t\tthis.link(`players.${playerIndex}`, 'currentScoringPlayer')\n\t},\n\tnextRound() {\n\t\tif (this.get('currentRound.number') === this.get('roundsToPlay')) {\n\t\t\tconst totals = this.get('totals')\n\t\t\tlet finalTotals = []\n\n\t\t\tObject.keys(totals).forEach(key => {\n\t\t\t\tfinalTotals.push(`${key}: ${totals[key]}`)\n\t\t\t})\n\n\t\t\treturn alert(`Game Over!\\n\\n${finalTotals.join('\\n')}`)\n\t\t}\n\n\t\tconst maxRound = Math.max(...this.get('currentGame.rounds').map(round => round.number))\n\n\t\tthis.push('currentGame.rounds', getNewRound(this.get('players'), maxRound))\n\t\tthis.link('players.0', 'currentScoringPlayer')\n\t\tthis.link(`currentGame.rounds.${this.get('currentGame.rounds').length - 1}`, 'currentRound')\n\t},\n\tchangeRound(roundNumber) {\n\t\tthis.link(`currentGame.rounds.${this.getRoundIndex(roundNumber)}`, 'currentRound')\n\t},\n\tchangePlayerRoundScore(player, scoreAdjustment) {\n\t\tconst currentRound = this.get('currentRound')\n\t\tlet newScore = 0\n\t\tif (scoreAdjustment) {\n\t\t\tnewScore = currentRound.scores[player] + scoreAdjustment\n\t\t}\n\n\t\tthis.set(`currentRound.scores.${player}`, newScore)\n\t},\n})\n"],"names":[],"mappings":"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"}